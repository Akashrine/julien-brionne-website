---
interface Props {
	title?: string;
	language?: string;
	caption?: string;
	children: any;
}

const { title, language, caption } = Astro.props;
---

<div class="my-8 md:my-12 code-window">
	<div class="code-header">
		<div class="dot red"></div>
		<div class="dot yellow"></div>
		<div class="dot green"></div>
	</div>
	<div class="p-6 overflow-x-auto">
		<pre class="font-mono text-sm leading-relaxed text-gray-300 m-0"><code class="code-content"><slot /></code></pre>
	</div>
	{caption && (
		<div class="px-4 pb-3 border-t border-[#3A3A3A]">
			<p class="text-xs text-[#9A9A9A] mt-2 italic">{caption}</p>
		</div>
	)}
</div>

<style>
	.code-window {
		background: #24292e;
		border-radius: 0.5rem;
		overflow: hidden;
		box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
		border: 1px solid #2A2A2A;
	}
	
	.code-header {
		background: #2A2A2A;
		padding: 0.5rem 1rem;
		display: flex;
		gap: 0.5rem;
		border-bottom: 1px solid #3A3A3A;
	}
	
	.dot {
		width: 0.75rem;
		height: 0.75rem;
		border-radius: 50%;
	}
	
	.dot.red {
		background: #FF5F57;
	}
	
	.dot.yellow {
		background: #FFBD2E;
	}
	
	.dot.green {
		background: #28CA42;
	}
	
	.code-window .code-content {
		color: #D4D4D4;
		font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
		white-space: pre-wrap;
		word-break: break-word;
	}
	
	/* Coloration syntaxique basique pour les éléments courants */
	.code-window .code-content :global(span[class*="token"]) {
		display: inline;
	}
	
	/* Si le code est déjà coloré par Shiki/MDX, préserver les styles */
	.code-window :global(pre[data-theme]),
	.code-window :global(pre code) {
		background: transparent !important;
		color: inherit;
	}
</style>

