---
import Layout from '../../layouts/Layout.astro';
import Navbar from '../../components/Navbar.astro';
import Footer from '../../components/Footer.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog'))
	.filter((post) => !post.data.draft)
	.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());

const title = "Blog — Réflexions sur le Product Leadership | Julien Brionne";
const description = "Articles sur le leadership produit, la stratégie produit, l'accompagnement d'équipes et les enjeux des startups SaaS.";
---

<Layout title={title} description={description}>
	<Navbar />
	<main>
		<!-- SECTION 1 — HERO -->
		<section class="pt-32 md:pt-40 pb-24 md:pb-28 px-6 md:px-12 bg-ivory dark:bg-graphite relative" aria-label="Hero - Blog">
			<div class="max-w-4xl mx-auto text-center space-y-6 fade-in-up">
				<!-- Pill Contextuel -->
				<div class="mb-6 inline-flex items-center gap-3 px-4 py-1.5 border border-sand/30 rounded-full bg-ivory/80 dark:bg-graphite/80 backdrop-blur-sm fade-in-up mx-auto">
					<span class="flex h-2 w-2 relative">
						<span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-sand opacity-75"></span>
						<span class="relative inline-flex rounded-full h-2 w-2 bg-sand"></span>
					</span>
					<span class="text-xs font-mono uppercase tracking-widest text-sand font-medium">Blog</span>
				</div>
				<h1 class="font-serif text-4xl md:text-5xl lg:text-6xl leading-[1.1] text-balance font-medium text-graphite dark:text-ivory">
					Réflexions sur le Product Leadership
				</h1>
				<p class="font-sans text-lg md:text-xl leading-relaxed text-graphite dark:text-warmgray-300 max-w-2xl mx-auto">
					Articles sur le leadership produit, la stratégie, l'accompagnement d'équipes et les enjeux des startups SaaS.
				</p>
			</div>
		</section>

		<!-- SECTION 2 — Liste des articles -->
		<section class="py-24 md:py-28 px-6 md:px-12 bg-ivory dark:bg-graphite-light relative z-10" aria-labelledby="articles-heading">
			<div class="max-w-7xl mx-auto">
				{posts.length === 0 ? (
					<div class="text-center py-16">
						<p class="font-sans text-lg text-graphite dark:text-warmgray-300">
							Aucun article pour le moment.
						</p>
					</div>
				) : (
					<div class="grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-12">
						{posts.map((post, index) => {
							const coverPath = post.data.cover 
								? `/blog/${post.slug}/${post.data.cover}` 
								: null;
							const postDate = new Date(post.data.date);
							const formattedDate = postDate.toLocaleDateString('fr-FR', {
								year: 'numeric',
								month: 'long',
								day: 'numeric'
							});
							
							return (
								<article class="group fade-in-up" style={`transition-delay: ${0.1 * index}s`}>
									<a href={`/blog/${post.slug}`} class="block h-full">
										<div class="bg-[#F9F6F1] dark:bg-graphite border border-sand/20 dark:border-sand/15 rounded-xl overflow-hidden hover:border-sand/40 dark:hover:border-sand/30 transition-all duration-300 hover:shadow-lg h-full flex flex-col">
											{coverPath && (
												<div class="aspect-video w-full overflow-hidden bg-graphite/5">
													<img 
														src={coverPath} 
														alt={post.data.title}
														class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
														loading="lazy"
													/>
												</div>
											)}
											<div class="p-8 md:p-10 flex flex-col flex-grow">
												<time class="font-sans text-sm text-sand dark:text-sand-light mb-4 block">
													{formattedDate}
												</time>
												<h2 class="font-serif text-2xl md:text-3xl leading-tight text-graphite dark:text-ivory mb-4 group-hover:text-sand dark:group-hover:text-sand-light transition-colors duration-300">
													{post.data.title}
												</h2>
												<p class="font-sans text-base md:text-lg leading-relaxed text-graphite dark:text-warmgray-300 mb-6 flex-grow">
													{post.data.description}
												</p>
												<span class="font-sans text-sm font-medium text-sand dark:text-sand-light group-hover:underline inline-flex items-center gap-2">
													Lire l'article
													<svg class="w-4 h-4 transition-transform duration-300 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
														<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
													</svg>
												</span>
											</div>
										</div>
									</a>
								</article>
							);
						})}
					</div>
				)}
			</div>
		</section>

		<!-- SECTION 3 — CTA Final -->
		<section id="contact" class="py-32 px-6 md:px-12 flex flex-col justify-center items-center text-center relative z-0 bg-ivory dark:bg-graphite fade-in-up" aria-labelledby="cta-heading">
			<div class="absolute inset-0 bg-sand/5 pointer-events-none"></div>
			<div class="max-w-3xl space-y-6 relative z-10">
				<h2 id="cta-heading" class="font-serif text-3xl md:text-4xl leading-tight text-graphite dark:text-ivory">
					Votre produit traverse un moment critique.
				</h2>
				<p class="font-serif text-lg italic opacity-80 text-graphite dark:text-warmgray-300">
					Clarifions ensemble ce qui bloque.
				</p>
				<p class="text-base text-graphite dark:text-warmgray-300">
					Un échange de 30 minutes pour comprendre votre situation et identifier les leviers immédiats.
				</p>
				<div class="flex flex-col items-center gap-6 pt-4">
					<a href="https://app.lemcal.com/@productcopilot/decouverte" 
					   data-lemcal-popup
					   class="inline-block bg-graphite dark:bg-ivory text-ivory dark:text-graphite font-sans px-10 py-5 text-sm font-medium tracking-wide btn-premium"
					   aria-label="Diagnostiquer votre situation produit">
						Diagnostiquer votre situation
					</a>
					<div class="w-16 h-0.5 bg-sand mx-auto opacity-40"></div>
				</div>
			</div>
		</section>
	</main>
	<Footer />
</Layout>

